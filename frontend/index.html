<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Store</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>ShopHub</h1>
            </div>
            <div class="nav-menu">
                <button id="categoriesBtn" class="nav-link">Categories</button>
                <button id="wishlistBtn" class="nav-link">
                    Wishlist <span id="wishlistCount" class="badge">0</span>
                </button>
                <button id="cartBtn" class="nav-link">
                    Cart <span id="cartCount" class="badge">0</span>
                </button>
                <button class="theme-toggle" id="themeToggle" title="Toggle Dark Mode">
                    <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Z"/>
                    </svg>
                </button>
                <button id="loginBtn" class="btn btn-primary">Login</button>
                <button id="registerBtn" class="btn btn-secondary">Register</button>
                <div id="userMenu" class="user-menu" style="display: none;">
                    <span id="username" class="username"></span>
                    <button id="myProductsBtn" class="btn btn-secondary">My Products</button>
                    <button id="logoutBtn" class="btn btn-danger">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Welcome to ShopHub</h2>
            <p>Discover amazing products at great prices</p>
        </div>
    </section>

    <!-- Search and Filter Section -->
    <section class="filters">
        <div class="container">
            <div class="filter-group">
                <input type="text" id="searchInput" class="search-input" placeholder="Search products..." autocomplete="off" data-form-type="other">
                <select id="categoryFilter" class="filter-select" autocomplete="off" data-form-type="other">
                    <option value="">All Categories</option>
                </select>
                <div class="price-filter">
                    <input type="number" id="minPrice" placeholder="Min Price" class="price-input" autocomplete="off" data-form-type="other">
                    <input type="number" id="maxPrice" placeholder="Max Price" class="price-input" autocomplete="off" data-form-type="other">
                </div>
                <select id="sortBy" class="filter-select" autocomplete="off" data-form-type="other">
                    <option value="-created_at">Newest First</option>
                    <option value="price">Price: Low to High</option>
                    <option value="-price">Price: High to Low</option>
                    <option value="name">Name: A-Z</option>
                </select>
                <button id="applyFilters" class="btn btn-primary">Apply Filters</button>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="products">
        <div class="container">
            <div id="productsGrid" class="products-grid">
                <!-- Products will be loaded here -->
            </div>
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
            </div>
            <div id="emptyState" class="empty-state" style="display: none;">
                <p>No products found</p>
            </div>
        </div>
    </section>

    <!-- Modals -->
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Login</button>
                <p class="error-message" id="loginError"></p>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Register</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" required>
                    <div class="password-strength-container">
                        <div class="password-strength-bar">
                            <div id="passwordStrengthBar" class="password-strength-fill"></div>
                        </div>
                        <div id="passwordStrengthText" class="password-strength-text"></div>
                    </div>
                    <div class="password-requirements">
                        <small id="passwordReq1" class="req-item">✗ At least 8 characters</small>
                        <small id="passwordReq2" class="req-item">✗ Contains uppercase letter</small>
                        <small id="passwordReq3" class="req-item">✗ Contains lowercase letter</small>
                        <small id="passwordReq4" class="req-item">✗ Contains number</small>
                        <small id="passwordReq5" class="req-item">✗ Contains special character</small>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Register</button>
                <p class="error-message" id="registerError"></p>
            </form>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close">&times;</span>
            <div id="productDetail"></div>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="productFormTitle">Add Product</h2>
            <form id="productForm">
                <div class="form-group">
                    <label>Product Name</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="productDescription" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label>Price</label>
                    <input type="number" id="productPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select id="productCategory" required>
                        <option value="">Select Category</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Stock Quantity</label>
                    <input type="number" id="productStock" required>
                </div>
                <div class="form-group">
                    <label>Image URL</label>
                    <input type="url" id="productImage">
                </div>
                <button type="submit" class="btn btn-primary btn-block">Save Product</button>
                <p class="error-message" id="productFormError"></p>
            </form>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close">&times;</span>
            <h2>Shopping Cart</h2>
            <div id="cartItems"></div>
            <div id="cartTotal" class="cart-total"></div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlistModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close">&times;</span>
            <h2>My Wishlist</h2>
            <div id="wishlistItems"></div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="paymentModalContent"></div>
        </div>
    </div>

    <!-- Floating Action Button (for authenticated users to add products) -->
    <button id="fabAddProduct" class="fab" style="display: none;" title="Add Product">
        <span>+</span>
    </button>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/payment.js"></script>
    <script src="js/wishlist.js"></script>
    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
